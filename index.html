<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<meta http-equiv="Access-Control-Allow-Origin" content="*" />
<link rel="stylesheet" href="style.css">
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatic Clock In</title>
</head>

<body>
    <div class="container">
        <div class="welcomeText">
            <text style="font-weight: bold; font-size: 30px;">Automatic Clock In Script for SHSID PE Course</text> 
            <div class="desc">This project is just a CS exercise which aims to dicover Scrapping, Flask, and Web Security technologies. It should not be used for any forms of illegal activities!</div>
            <div class="desc">Feel free to star on GitHub~</div>
        </div>
        <div style="width: 100%">
        <div class="item">
            <text class="title">Grade:</text>
            <select class="selector" id="grade">
                <option value="G9">9</option>
                <option value="G10">10</option>
                <option value="G11">11</option>
                <option value="G12">12</option>
            </select>
        </div>
        <div class="item">
            <text class="title">Class:</text>
            <select class="selector" id="classNum">
                <option value="1">1</option>
                <option value="1">1A</option>
                <option value="1">1B</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
            </select>
        </div>
        <div class="item">
            <text class="title">Student ID:</text>
            <input type="text" id="id" class="input"/>
        </div>
    </div>
        <div class="button" id="btn" onclick="submit()">SUBMIT</div>
        <textarea class="textArea" id="log" cols="30" rows="10" placeholder="Output Log:" value = ""></textarea>
    </div>
</body>

<script>
    jQuery.support.cors = true;;
    function submit() {
            console.log("Posting...");
        var grade = document.getElementById("grade").value;
        var classNum = document.getElementById("classNum").value;
        var id = document.getElementById("id").value;;
        document.getElementById("log").value = "Running...";
        document.getElementById("log").value = document.getElementById("log").value + "\n You have entered the following parameters:";
        document.getElementById("log").value = document.getElementById("log").value + "\n Grade:" + grade + " Class: " + classNum + " Student ID: "+ id;
        if(grade == "" || classNum == "" || id == ""){
            document.getElementById("log").value = document.getElementById("log").value + "\n Error: Please make sure that you have entered all the parameters";
            return;
        }
        document.getElementById("log").value = document.getElementById("log").value + "\n Posting Data to the server backend...";
        $.post("http://39.98.164.171:80/clockin", { 
            'grade': grade,
            'class': classNum,
            'id': id,
            'exerciseTime': '30mins'
        }, function (result) {
            document.getElementById("log").value = document.getElementById("log").value + result;
            document.getElementById("log").value = document.getElementById("log").value + "\n Auto Clock In Succucess!";
            alert("Auto Clock In Succucess!");
        });
    }
</script>

</html>